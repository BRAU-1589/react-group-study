
7.2 라이프사이클 메서드 살펴보기


render() { ... }<br/>
- 컴포넌트의 모양세 정의<br/>
- 컴포넌트에서 가장 중요한 메서드<br/>
- 라이프사이클 메서드의 유일한 필수 메서드<br/>
- render 내부에서 this.props와 this.state에 접근 가능.<br/>
- react 요소 (tag/component/false/null 등) 반환<br/>
- DOM 접근 X<br/>
- componentDidMount 에서 처리<br/>
- 내부의 이벤트 설정 외의 곳에서 setState 사용 X<br/>
- componentDidMount 에서 처리<br/>
<br/>

contructor(props) { ...}<br/>
- 생성자 메서드<br/>
- 컴포넌트 생성시 처음 실행<br/>
- 초기 state 값 설정<br/>
  <br/>

getDerivedStateFromProps<br/>
- react v.16.3 이후 새로 만들어진 메서드<br/>
- props로 받은 값을 state에 동기화<br/>
- 컴포넌트 마운트 시 호출<br/>
- 컴포넌트 업데이트 시 호출<br/>

```javascript
static getDerivedStateFromProps(nextProps, prevState) {
    if(nextProps.value != = prevState.value) {               // 조건에 따라 특정 값 동기화
        return { value: nextProps.value }；
    }
    return null；                                            // state를 변경할 필요가 없다면 null을 반환
}
```

<br/><br/>
componentDidMount () { ... }
- 컴포넌트 생성과 첫 랜더링 이후 실행
- 타 자바스크립트 라이브러리/프레임워크 함수 호출 작업 처리
- 비동기 작업 (이벤트 등록, setTimeout, setInterval, 네트워크 요청 등) 처리

<br/><br/>
shouldComponentUpdate (nextProps, nextState) { ... }<br/>
- props / state변경시 리렌더링 시작 여부 지정 메서드<br/>
- 반드시 true / false 값 반환<br/>
- 개발자의 정의 부재시, 디폴트값인 true로 반환.<br/>
- false 정의 시, 업데이트 과정 중지. 리렌더링 과방지<br/>
- props 접근<br/>
- 현재일 경우, this.props<br/>
- 새로 설정될 값일 경우, nextProps<br/>
- state 접근<br/>
- 현재일 경우, this.state<br/>
- 새로 설정될 값일 경우, nextState<br/>

<br/><br/>
getSnapshotBeforeUpdate<br/>
- 리엑트 v.16.3 이후 만든 메서드<br/>
- render에서 만든 결과물이 브라우저에 실제 반영 되기 직전에 호출.<br/>
- snapshor으로 반환 값 전달 받음<br/>
- 업데이트 직전 값을 참고 시 활용<br/>

<br/><br/>
```javascript
static getSnapshotBeforeUpdate(prevProps, prevState) {
    if(prevProps.array != = this.state.arrray) { // 조건에 따라 특정 값 동기화
        const { scrollTop, scrollHeight } = this.list
        return { scrollTop, scrollHeight }；
    }
}
```


<br/><br/>

componentDidUpdate(prevProps, prevState, snapshot) { ... }<br/>
- 리렌더링 완료 후 실행.<br/>
- DOM 처리 가능.<br/>
- prevProps/prevState로 컴포넌트 이전 데이터에 접근 가능<br/>
- getSnapshotBeforeUpdate 반환값 O -> 여기서 snapshot 값 전달받음<br/>

<br/><br/>

componentWillUnmount() { ... }<br/>
- 컴포넌트를 DOM에서 제거할 때 실행.<br/>
- componentDidMount에서 등록한 이벤트, 타이머, 직접 생성 DOM 이 있으면 여기에서 제거.<br/>
<br/><br/>

componentDidCatch<br/>
- 리엑트 v.16. 이후 만든 메서드<br/>
- 렌더링 도중 에러 발생 시, 애플리케이션이 오류 UI를 보여줄 수 있게 함<br/>
- 컴포넌트 자신의 에러 확인x<br/>
- this.props.children으로 전달되는 컴포넌트의 에러 확인O<br/>

<br/><br/>
```javascript
componentDidCatch(error, info) { //error = 파라미터에게 발생 에러 알려줌. info = 코드 위치 알려줌
    this.setState({
        error: true
    });
    console.log({error, info });
    }
}
```
<br/><br/>

사용자 인터페이스 구축에 널리 사용되는 JavaScript 라이브러리인 React의 다양한 수명 주기 방법과 관련되어 있다. <br/>
이러한 수명 주기 메서드는 탑재, 업데이트, 탑재 해제 등 구성 요소 수명 주기의 다양한 단계에서 작업을 수행할 수 있게 해주는 후크이다. <br/>
각 방법에 대한 자세한 설명은 다음과 같다.

<br/><br/>
comComponentDidMount():

목적: 구성 요소가 처음 렌더링되어 DOM에 삽입된 후에 실행됩니다. <br/>
이는 API 호출을 시작하거나, 구독을 설정하거나, 구성 요소를 사용할 준비가 되면 발생해야 하는 기타 작업을 처리하기에 좋은 장소입니다.<br/>
사용법: 데이터 가져오기, 리스너 또는 타이머 설정, DOM 노드가 있어야 하는 기타 작업과 같은 작업에 일반적으로 사용됩니다.<br/>

<br/><br/>
shouldComponentUpdate(nextProps, nextState):<br/>
<br/>
목적: 변경된 소품이나 상태에 응답하여 구성 요소를 다시 렌더링해야 하는지 여부를 결정합니다.<br/>
반환: 부울 값(true 또는 false). 'false'를 반환하면 구성 요소가 업데이트되지 않습니다.<br/>
사용법: 불필요한 재렌더링을 방지하여 성능을 최적화하는 데 사용할 수 있습니다.<br/>

<br/><br/>
getSnapshotBeforeUpdate(prevProps, prevState):
<br/>
목적: DOM이 업데이트되기 직전에 호출됩니다. <br/>
이를 통해 구성 요소는 잠재적으로 변경되기 전에 DOM(예: 스크롤 위치)에서 일부 정보를 캡처할 수 있습니다.<br/>
반환: 반환 값은 comComponentDidUpdate에 세 번째 매개변수로 전달됩니다.<br/>
사용법: 렌더링 주기를 통해 특정 상태(예: 스크롤 위치)를 유지해야 하는 경우에 유용합니다.

<br/><br/>
comComponentDidUpdate(prevProps, prevState, snapshot):
<br/>
목적: 구성요소의 업데이트가 DOM에 플러시된 후에 실행됩니다. <br/>
구성 요소가 업데이트되었을 때 DOM에서 작업하기에 좋은 장소입니다.<br/>
사용법: props나 상태 변경에 대한 응답으로 DOM 작업이나 네트워크 호출에 유용합니다. <br/>
snapshot 매개변수는 getSnapshotBeforeUpdate에서 반환된 값입니다.

<br/>

comComponentWillUnmount():
<br/>
목적: 구성 요소가 DOM에서 파괴되고 제거되기 직전에 호출됩니다.<br/>
사용법: 타이머 무효화, 네트워크 요청 취소 또는 comComponentDidMount에서 생성된 구독 정리와 같은 필요한 정리를 수행하는 데 이상적입니다.<br/>
<br/>
comComponentDidCatch(오류, 정보):<br/>
<br/>
목적: 구성 요소 트리의 오류 처리에 사용됩니다. <br/>
하위 구성 요소에서 JavaScript 오류를 포착하고 상위 구성 요소가 대체 UI를 표시하거나 오류를 기록할 수 있도록 합니다.<br/>
사용법: comComponentDidCatch에서 오류가 발생했음을 나타내도록 상태를 설정할 수 있으며, <br/>
이로 인해 오류 메시지나 다른 UI로 다시 렌더링이 트리거될 수 있습니다. <br/>
'info' 매개변수는 어떤 구성요소에서 오류가 발생했는지에 대한 정보를 제공합니다.<br/>
getSnapshotBeforeUpdate 및 comComponentDidCatch에 제공된 코드 조각은 이러한 메서드를 구현할 수 있는 방법의 예입니다.<br/>
<br/>
getSnapshotBeforeUpdate에서는 특정 prop(array)이 변경되었는지 확인하고 변경된 경우 현재 스크롤 위치를 캡처합니다.<br/>
comComponentDidCatch에서는 오류를 나타내기 위해 상태를 업데이트하고 오류가 발생한 위치에 대한 정보와 오류를 기록합니다.<br/>
이러한 수명주기 방법은 React 애플리케이션의 수명주기 전반에 걸쳐 구성 요소의 동작을 관리하는 데 중요합니다.<br/>