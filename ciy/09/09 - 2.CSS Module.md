9.2 Sass 사용하기


Sass는 CSS 전처리기로 3가지 장점을 가집니다.



1.     CSS 전처리기로 복잡한 작업을 쉽게 할 수 있도록 합니다.

2.     스타일 코드의 재활용성을 높여줍니다.

3.     코드의 가독성을 높여 유지 보수를 더욱 쉽게 합니다.



create-react-app 구버전에서는 Sass를 사용하기 위해 추가 작업이 필요했는데, v2 버전부터는 별도의 작업 없이 바로 사용할 수 있습니다.



Sass에서는 두 가지 확장자 .sass와 .scss를 지원합니다. 아래 코드를 통해 두 확장자의 문법을 비교해 보세요.



// .sass

$font-stack: Helvetica, sans-serif
$primary-color: #333


body
font: 100% $font-stack
color: $primary-color
// .scss

$font-stack: Helvetica, sans-serif;
$primary-color: #333;

body {
font: 100% $font-stack;
color: $primary-color;
}


.sass는 중괄호와 세미콜론을 사용하지 않습니다. 반면 .scss는 기존 CSS와 비슷한 방식입니다.

두 방식 중에 .scss가 더 자주 사용되므로, 이 방식에 대해 알아보도록 하겠습니다.



실습을 하기 위해서는 Sass를 CSS로 변환해주는 node-sass라는 라이브러리를 설치해야 합니다. 서버를 구동 중인 Git bash말고, 창을 하나 더 띄워 다음 명령어를 실행하세요.



$yarn add node-sass


설치가 됐다면, SassComponent.scss를 만들어보세요



// 변수 만들기
$red: #fa5252;
$orange: #fd7e14;
$yellow: #fcc419;
$green: #40c057;
$blue: #339af0;
$indigo: #5c7cfa;
$violet: #7950f2;

// 믹스인 만들기
@mixin square($size) {
$calculated: 32px * $size;
width: $calculated;
height: $calculated;
}


.SassComponent {
display: flex;
.box { // 일반 CSS에서는 .SassComponent .box와 마찬가지
background: red;
cursor: pointer;
transition: all 0.3s ease-in;
&.red {
// .red 클래스가 .box와 함께 사용되었을 때
background: $red;
@include square(1);
}
&.orange {
background: $orange;
@include square(2);
}
&.yellow {
background: $yellow;
@include square(3);
}
&.green {
background: $green;
@include square(4);
}
&.blue {
background: $blue;
@include square(5);
}
&.indigo {
background: $indigo;
@include square(6);
}
&.violet {
background: $violet;
@include square(7);
}
&:hover {
// .box에 마우스를 올렸을 때
background: black;
}
}
}


그리고 이 스타일 시트를 사용하는 SassComponent.js도 만들어 App 컴포넌트에 띄워보세요.

서버를 재구동하면, 아래와 같은 화면이 적용됩니다.






9.2.1 utils 함수 분리하기
여러 파일에서 사용될 수 있는 Sass 변수 및 믹스인은 다른 파일로 분리하여 작성한 뒤, 필요한 곳에서 쉽게 불러와 사용할 수 있습니다. 바로 utils 함수를 이용하는 것인데요, 위의 예제를 분리하기 위해 3가지 단계가 필요합니다.



1. src 디렉터리에 styles 디렉터리를 생성하고, 그 안에 utils.scss 파일을 만드세요

2. 위의 SassComponent.scss에서 작성한 변수와 믹스인 만들기 부분을 옮기세요.



// 변수 사용하기
$red: #fa5252;
$orange: #fd7e14;
$yellow: #fcc419;
$green: #40c057;
$blue: #339af0;
$indigo: #5c7cfa;
$violet: #7950f2;


// 믹스인 만들기
@mixin square($size) {
$calculated: 32px * $size;
width: $calculated;
height: $calculated;
}


3. SassComponent.scss에서 @import를 이용해 utils.scss파일을 불러오세요.

@import './styles/utils';
.SassComponent {
display: flex;
.box {
background: red;
cursor: pointer;
transition: all 0.3s ease-in;
(...)
}
}


그렇다면 분리되기 전과 같은 결과가 나타납니다.





9.2.2 sass-loader 설정 커스터마이징하기
반드시 필요한 설정은 아니지만, 설정해두면 편리합니다. @import 구문에서 참조할 파일의 경로명이 길어진다면 불편하겠죠? 이 문제점을 sass-loader의 설정을 커스터마이징하여 해결할 수 있습니다.



create-react-app로 만든 프로젝트는 프로그램 구조를 간단히 하기 위해 세부 설정이 모두 숨겨져 있습니다. 따라서 커스터마이징하기 위해 프로젝트 디렉터리에서 yarn eject 명령어를 통해 세부 설정을 밖으로 꺼내 주어야 합니다.



먼저, yarn eject는 Git에 커밋되지 않은 변화가 있다면 진행되지 않으니, 커밋해줍니다. VS Code 좌측의 메뉴 중 Git UI를 이용하거나, Git bash에 다음과 같은 명령어를 사용하여 커밋할 수 있습니다.



$ git add .
$ git commit -m’Commit before yarn eject’
$ yarn eject
$ react-scripts eject


커밋했다면, 프로젝트 디렉터리에 config라는 디렉터리가 생성됩니다. 그 디렉터리에 있는 webpack.config.js를 열어보세요. 그 파일에서 “sassRegex”라는 키워드를 찾아보세요. 아래와 같은 코드에 존재할 것입니다.



{
test: sassRegex,
exclude: sassModuleRegex,
use: getStyleLoaders(
{
importLoaders: 2,
sourceMap: isEnvProduction && shouldUseSourceMap,
},
‘sass-loader‘
),
sideEffects: true,
},


여기에 있는 use:에 있는 ‘sass-loder’ 부분을 지우고, 뒷부분에 concat을 통해 커스터마이징된 sass-loader 설정을 넣어주세요.



{
test: sassRegex,
exclude: sassModuleRegex,
use: getStyleLoaders({
importLoaders: 2,
sourceMap: isEnvProduction && shouldUseSourceMap
}).concat({
loader: require.resolve(‘sass-loader‘),
options: {
includePaths: [paths.appSrc + ‘/styles‘],
sourceMap: isEnvProduction && shouldUseSourceMap,}
}),
sideEffects: true
},


설정 파일은 저장한 후, 서버를 재구동하세요. 설정이 완료되었다면 이제 utils.scss 파일을 불러올 때 상대 경로가 아닌 절대 경로를 사용하여 불러올 수 있습니다.



그럼 @import './styles/utils.scss'; 가 아닌 @import ‘utils.scss’;로 간단하게 불러올 수 있습니다.





만약 매번 import하는 방법이 귀찮다면, sass-loader의 data옵션을 설정할 수 있습니다. 이 옵션을 통해 Sass 파일을 불러올 때마다 코드의 맨 윗부분에 특정 코드를 포함합니다. Webpack.config.js를 열어 data필드를 수정해보세요.



{
test: sassRegex,
exclude: sassModuleRegex,
use: getStyleLoaders({
importLoaders: 2,
sourceMap: isEnvProduction && shouldUseSourceMap
}).concat({
loader: require.resolve('sass-loader'),
options: {
includePaths: [paths.appSrc + '/styles'],
sourceMap: isEnvProduction && shouldUseSourceMap,
data: `@import 'utils';`
}
}),
sideEffects: true
},


작성 후, 서버를 재구동하고 나면 이제 import 구문을 쓰지 않아도 정상 작동합니다.









9.2.3 node_modules에서 라이브러리 불러오기
Sass의 장점은 라이브러리를 쉽게 불러와 사용할 수 있다는 것입니다.

yarn을 통해 설치한 라이브러리를 사용하는 기본 방식은 상대 경로를 이용해 node_modules까지 들어가서 불러오는 것입니다.



@import ‘../../../node_modules/library/styles‘


너무 길지 않나요? 물결 문자를 이용하면 더 간략하게 표현할 수 있습니다.



@import ‘~library/styles‘;


Sass 라이브러리를 불러올 때 node_modules 내부 라이브러리 경로 안에 들어있는 scss 파일을 불러와야 합니다. 보통 scss 파일 경로를 따로 알려주지 않는 경우가 많아 직접 들어가 확인해야 합니다. 

 